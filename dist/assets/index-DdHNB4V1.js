var P=Object.defineProperty;var E=(t,e,r)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var h=(t,e,r)=>E(t,typeof e!="symbol"?e+"":e,r);import{u as n,B as p,S as N,d as f,y as b,a as S}from"./index-D5_cQq2M.js";function o(t){{console.info("For debugging, set `DEBUG_MODE=true` in your .env file.");return}}const m={PROJECTS:"/posts/index.json",SINGLE_POST:t=>`/posts/${t}/index.json`};class w extends Error{constructor(r,s){super(s);h(this,"kind");this.name="PostsError",this.kind=r}}function y(){const[t,e]=f([]),[r,s]=f(null);return b(()=>{async function a(){const c=(await(await fetch(m.PROJECTS)).json().catch(i=>(o(),s(new w("fetch","Failed to fetch projects list")),[]))).posts||[];o();const u=await Promise.all(c.map(async i=>{const g=m.SINGLE_POST(i),l=await fetch(g).catch(j=>{o()});if(!l)return null;o();const d=await(l==null?void 0:l.json().catch(j=>(o(),null)));return d?(o(),d):null}));return console.log("All projects fetched:",u),u.filter(i=>i!==null)}a().then(c=>{console.log("Projects state updated:",c),e(c)})},[]),[t,r]}function O(){const[t,e]=y(),r=s=>a=>{a.preventDefault(),console.log("Routing to:",s)};return e?n(p,{children:e.message}):t.length===0?n(p,{children:"No projects found."}):n("section",{id:"projects-list",children:n("div",{className:"centered-column",children:n("div",{className:"projects-grid",children:t.map(s=>n("button",{className:"project-card",onClick:r(`/projects/${s.pathName}`),children:[n("img",{className:"thumbnail",src:s.thumbnail,alt:s.title}),n(N,{className:"project-title",children:s.title}),n("p",{className:"project-subtitle",children:s.subtitle})]},s.id))})})})}function B(){return n("div",{id:"projects-page",children:[n(S,{}),n(O,{})]})}export{B as default};
